{% extends "core-layout.html" %}
{# {% extends request.base_template %} #}
{% block title %}Dashboard{% endblock %}

{% block javascripts %}
  <script type="text/javascript" src="./js/tableActions.js"></script>
  <style type="text/css" media="all">
body
        {
        padding:0;
        border:0;
        margin:0;
        text-align:center;
        font-size:12px;
        font-family: verdana,arial,sans-serif;
        color:#545454;
        min-width: 800px;
        } 
kbd
        {
        background-color:#eeeeee;
        padding:2px;
        border:1px solid #dddddd;
        border-bottom-color:#999999;
        border-left-color:#999999;
        }
kbd, code
        {
        font-family:'andale mono','lucida console','courier new',monospace;
        font-size:1em;
        }
code
        {
        font-family:'andale mono','lucida console','courier new',monospace;
        font-size:1em;
        }
p
        {
        line-height:1.6em;
        margin:0 0 1em 0;
        }
p a
        {
        font-weight:normal;
        outline:none;
        }
p a:link,
p a:visited
        {
        color:#333;
        text-decoration:underline;
        }
p a:hover
        {
        color:#fff;
        text-decoration:none;
        background:#000;
        }
p a:active
        {
        color:#000;
        text-decoration:underline;
        }

h2 span
        {
        font-variant:small-caps;
        text-transform:none;
        }
table
        {
        width:auto;
        padding: 0;
        margin: 0 auto 1.5em auto;
        border-left: 1px solid #C1DAD7;
        border-collapse:collapse;
        }
caption
        {
        padding: 0 0 5px 0;
        margin:0 auto;
        width:auto;
        font: italic 11px "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
        text-align: right;
        }
th
        {
        font: bold 10px/22px "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
        color: #4f6b72;
        border-right: 1px solid #C1DAD7;
        border-bottom: 1px solid #C1DAD7;
        border-top: 1px solid #C1DAD7;
        letter-spacing: 1px;
        text-transform: uppercase;
        text-align:center;
        padding: 8px 12px 4px 12px;
        background: #CAE8EA url(./media/bg_header.jpg) no-repeat;
        vertical-align:middle;
        }
td
        {
        font: normal 11px "Trebuchet MS", Verdana, Arial, Helvetica, sans-serif;
        border-right: 1px solid #C1DAD7;
        border-bottom: 1px solid #C1DAD7;
        padding: 6px 12px 6px 12px;
        color: #4f6b72;
        text-align:center;
        }
/* Alternate row style */
tr.alt
        {
        background: #F5FAFA;
        color: #797268;
        }
/* The current cell */
table tbody tr td.currentCell,
table tbody tr td:hover,
table tbody tr.alt td:hover
        {
        background-color:#aaFAFA;
        }
/* Normal row hover styles */ 
table tr.rowHover td,  /* Internet Explorer < 7 (and 7 in quirks mode) requires a specific class */
tr:hover td            /* All others can use the :hover pseudo */
        {
        background-color:#daFAFA;
        }  
/* Alternate row hover styles */
tr.alt:hover td
        {
        background-color:#caFAFA;
        }    
/* Column "cell" highlighting */
table tr td.rowHover
        {
        background-color:#eaFAFA;
        }
/* Header highlighting */
table tr th.rowHover
        {
        color:#222;
        }   
/* Row select styles */ 
table tbody tr.alt.rowSelect,   /* Everything but Internet Explorer (IE treats this rule as being tr.rowSelect) */
table tbody tr.alt.rowSelect td
        {
        background-color:#597bc6;
        color:#eee !important;
        }
table tbody tr.rowSelect, /* All browsers */
table tbody tr.rowSelect td
        {
        background-color:#6783cb;
        color:#fff !important;         
        }

tr.rowSelect td.rowHover,
tr.rowSelect:hover td
        {
        background-color:#6783bb;
        }
tr.alt.rowSelect td.rowHover,
tr.alt.rowSelect:hover td
        {
        background-color:#597bb6;
        }
table tr.rowSelect td:hover,
tr.rowSelect td.currentCell
        {
        background-color:#5783bb;
        }
table tr.alt.rowSelect td:hover
        {
        background-color:#497bb6;
        }
/* Just for the demo, make the cursor a pointer if the table rows are selectable */
table.rowselect-rowSelect tbody td
        {
        cursor:pointer;
        }
</style> 
<script type="text/javascript">
//<![CDATA[

/*

        Testing the use of an Object method as a callback parameter.
        The first table's className has been given the class "rowselectcallback-myObject-testMethod"
        which is translated to the Object reference "myObject.testMethod"

*/
var myObject = {
        testMethod:function(details) {
                var total;
                // We are removing a row, always enable this action
                if(details.remove) {
                        total = details.rows.length ? details.rows.length - 1 : 0;
                // We are adding a row
                } else {
                        // Only if no TH tags located
                        if(details.row.getElementsByTagName("th").length != 0) {
                                // return false to tell the script not to select this row
                                return false;
                        };
                        total = details.rows.length + 1;
                };
                document.getElementById('selectResults').innerHTML = total + " row" + (total != 1 ? "s" : "") + " currently selected";
                // Return TRUE or FALSE to tell the script to enable the ADD/REMOVE action
                return true;
        }
};

//]]>
</script>
{% endblock %}


{% block content %}
			<div class="post">
				<h2 class="title">User Management</h2>
				<!--<div style="clear: both;">&nbsp;</div>-->
				<h3>
		            {% if search_string %}
		            <a href="">Search for <span class="highlight">{{ search_string }}</span></a>
		            {% endif %}
		        </h3>
		        
		        	<table class="big-table">
				            {% for column, display in columns %}
						<col{% ifequal column sort_column %} class="sorted"{% endifequal %} />
				            {% endfor %}
						<thead>
							
							{% for column, display in columns %}
							{% ifequal column sort_column %}
								<th class="sorted {% if sort_descending %}descending{% else %}ascending{% endif %}">
									<a href="?q={{ search_string }}&sort_descending={% if sort_descending %}false{% else %}true{% endif %}&sort_column={{ column }}" title="Sort by {{ display }}{% if sort_descending %} (asc){% endif %}">
										{{ display }}
									</a>
								</th>
							{% else %}
								<th><a href="?q={{ search_string }}&sort_column={{ column }}" title="Sort by {{ display }}">{{ display }}</a></th>
							{% endifequal %}
				                        {% endfor%}
				                        
				                        <!--Un sorted columns-->
				                    	<th scope="col">Station</th>
										<th scope="col">Phone number</th>
				                        <th scope="col">Action</th>
				        </thead>
						<tbody>{% if polices %}{% for police in polices %}
							<tr>
								<td><a href="/police/{{ police.pk }}"{% if police.last_name %}>{{ police.last_name }}{% else %} class="unknown">Unknown{% endif %}</a></td>
				                <td><a href="/police/{{ police.pk }}"{% if police.first_name %}>{{ police.first_name }}{% else %} class="unknown">Unknown{% endif %}</a></td>
								<td>{% if police.username %}{{ police.username }}{% else %}<span class="na">unknown</span>{% endif %}</td>
				                <td>{% if police.code %}{{ police.code }}{% else %}<span class="na">unknown</span>{% endif %}</td>
				                <td>{% if police.created_date %}{{ police.created_date }}{% else %}<span class="na">unknown</span>{% endif %}</td>
				                {% for profile in profiles %}
				                	{% ifequal police profile.police %}
										<td>
										      {% if profile.station %}{{ profile.station }}{% else %} Unassigned{% endif %}
										</td>
										<td>
										      {% if profile.phone_number %}{{ profile.phone_number }}{% else %} No number{% endif %}										      
										</td>
									{% endifequal %}
								{% endfor %}
								<td></td><td></td> <!--  just for demo -->
								<td>
                                    <a href="/police/{{ police.pk }}">Edit</a> |
                                    <a href="/police/{{ police.pk }}/delete">Delete</a>
                                </td>
							</tr>{% endfor %}{% else %}
							<tr class="no-data">
								<td colspan="3">
									No Station Police added Yet.
									<a href="/police/add" class="add">
										Add a Station Police
									</a>
								</td>
							</tr>{% endif %}
						</tbody>
						
					</table>
			</div>
			
{% endblock %}

{% block sidebar %}
<!--  this is how to put stuff on the sidebar -->
				<h3>Search for Station Police</h3>
			    <form method="get" id="search">
	                <input name="q" type="text" value="{{ search_string }}" />
	                <input type="submit" value="Search" />
	            </form>   
{% endblock %}
</body>

